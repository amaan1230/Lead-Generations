<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>LeadGen Dashboard</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>

<body>
    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
        <a href="/"
            style="text-decoration: none; margin-bottom: 40px; display: flex; align-items: center; gap: 12px; padding-left: 12px; color: inherit;">
            <div
                style="width: 32px; height: 32px; background: linear-gradient(135deg, #007AFF, #5856D6); border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold;">
                L</div>
            <span style="font-weight: 700; font-size: 18px; color: var(--text-primary);">LeadGen</span>
        </a>

        <nav class="sidebar-nav">
            <a href="#dashboard" class="nav-item active" data-page="dashboard">
                <span>üìä</span> Dashboard
            </a>
            <a href="#scraper" class="nav-item" data-page="scraper">
                <span>üîç</span> Scraper
            </a>
            <a href="#campaign" class="nav-item" data-page="campaign">
                <span>üìß</span> Campaign
            </a>
            <a href="#analytics" class="nav-item" data-page="analytics">
                <span>üìà</span> Analytics
            </a>
        </nav>

        <div style="margin-top: auto; padding: 16px; border-top: 1px solid rgba(0,0,0,0.05);">
            <div style="display: flex; align-items: center; gap: 12px;">
                <div style="width: 32px; height: 32px; background: #E5E5EA; border-radius: 99px;"></div>
                <div>
                    <div style="font-size: 14px; font-weight: 600;">Admin User</div>
                    <div style="font-size: 12px; color: var(--text-secondary);">admin@leadgen.com</div>
                </div>
            </div>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Dashboard Page -->
        <div id="dashboard-page" class="page active">
            <header style="display: flex; justify-content: space-between; align-items: flex-end; margin-bottom: 40px;">
                <div>
                    <h1>Dashboard</h1>
                    <p>Overview of your outreach performance.</p>
                </div>
                <button class="btn btn-secondary" id="refreshBtn">
                    ‚ü≥ Refresh
                </button>
            </header>

            <!-- Stats Grid -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon stat-icon-blue">üë•</div>
                    <div>
                        <div class="stat-value" id="totalLeads">0</div>
                        <div class="stat-label">Total Leads</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon stat-icon-purple">‚úâÔ∏è</div>
                    <div>
                        <div class="stat-value" id="emailsSent">0</div>
                        <div class="stat-label">Emails Sent</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon stat-icon-green">‚úÖ</div>
                    <div>
                        <div class="stat-value" id="contacted">0</div>
                        <div class="stat-label">Contacted</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon stat-icon-orange">‚è≥</div>
                    <div>
                        <div class="stat-value" id="followups">0</div>
                        <div class="stat-label">Pending</div>
                    </div>
                </div>
            </div>

            <!-- Leads Table -->
            <div class="card">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px;">
                    <h3>Recent Leads</h3>
                    <select id="statusFilter" style="width: auto;">
                        <option value="">All Status</option>
                        <option value="SCRAPED">Scraped</option>
                        <option value="ENRICHED">Enriched</option>
                        <option value="CONTACTED">Contacted</option>
                    </select>
                </div>
                <div class="table-container">
                    <table class="leads-table">
                        <thead>
                            <tr>
                                <th>Clinic Name</th>
                                <th>Email</th>
                                <th>Status</th>
                                <th>Last Contacted</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="leadsTableBody">
                            <tr>
                                <td colspan="5" style="text-align: center; color: var(--text-secondary);">Loading...
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Scraper Page -->
        <div id="scraper-page" class="page" style="display: none;">
            <header style="margin-bottom: 40px;">
                <h1>Scraper</h1>
                <p>Find new leads via Google Maps.</p>
            </header>

            <div class="card" style="max-width: 600px;">
                <div class="form-group" style="margin-bottom: 24px;">
                    <label style="display: block; font-weight: 600; margin-bottom: 8px;">Search Query</label>
                    <input type="text" id="searchQuery" placeholder="e.g. Dentists in New York">
                </div>
                <button class="btn btn-primary" id="runScraperBtn" style="width: 100%;">
                    Start Scraping
                </button>

                <div id="scraperProgress" style="display: none; margin-top: 24px;">
                    <div style="color: var(--text-secondary); margin-bottom: 8px;" id="scraperStatus">Processing...
                    </div>
                    <div style="height: 4px; background: #E5E5EA; border-radius: 2px; overflow: hidden;">
                        <div
                            style="height: 100%; width: 50%; background: var(--ios-blue); animation: progress 2s infinite ease-in-out;">
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Analytics Page -->
        <div id="analytics-page" class="page" style="display: none;">
            <header style="margin-bottom: 40px;">
                <h1>Analytics</h1>
                <p>Deep dive into your metrics.</p>
            </header>
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon stat-icon-blue">üìä</div>
                    <div>
                        <div class="stat-value" id="analyticsResponseRate">0%</div>
                        <div class="stat-label">Response Rate</div>
                    </div>
                </div>
            </div>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 24px;">
                <div class="card">
                    <h3>Lead Distribution</h3>
                    <div id="statusChart" style="height: 300px;"></div>
                </div>
                <div class="card">
                    <h3>Performance</h3>
                    <div id="performanceChart" style="height: 300px;"></div>
                </div>
            </div>
        </div>

        <!-- Campaign Page -->
        <div id="campaign-page" class="page" style="display: none;">
            <header style="margin-bottom: 40px;">
                <h1>Campaigns</h1>
                <p>Manage your email outreach.</p>
            </header>
            <div class="card">
                <h3>Bulk Sender</h3>
                <p>Select leads logic would go here (simplified for UI demo).</p>
                <div style="margin-top: 24px; display: flex; gap: 12px;">
                    <button class="btn btn-primary" id="previewAllBtn">Preview Emails</button>
                    <button class="btn btn-secondary" id="sendAllBtn">Send Batch</button>
                </div>
            </div>
        </div>

    </main>

    <!-- Scripts -->
    <script src="app.js"></script>
    <script>
        // Simple page switcher logic
        document.querySelectorAll('.nav-item').forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                // Update nav
                document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
                link.classList.add('active');

                // Show page
                const pageId = link.getAttribute('data-page') + '-page';
                document.querySelectorAll('.page').forEach(p => p.style.display = 'none');
                const page = document.getElementById(pageId);
                if (page) {
                    page.style.display = 'block';
                    // Trigger animation
                    page.style.opacity = 0;
                    page.style.transform = 'translateY(10px)';
                    setTimeout(() => {
                        page.style.opacity = 1;
                        page.style.transform = 'translateY(0)';
                        page.style.transition = 'all 0.3s ease';
                    }, 50);
                }
            });
        });

        // Progress Bar Animation
        const style = document.createElement('style');
        style.innerHTML = `
            @keyframes progress {
                0% { transform: translateX(-100%); }
                100% { transform: translateX(200%); }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>

</html>